function Markdown(text){var parser;return"undefined"==typeof arguments.callee.parser?(parser=eval("new "+MARKDOWN_PARSER_CLASS+"()"),parser.init(),arguments.callee.parser=parser):parser=arguments.callee.parser,parser.transform(text)}function Markdown_Parser(){this.nested_brackets_depth=6,this.nested_url_parenthesis_depth=4,this.escape_chars="\\\\`*_{}[]()>#+-.!",this.document_gamut=[["stripLinkDefinitions",20],["runBasicBlockGamut",30]],this.block_gamut=[["doHeaders",10],["doHorizontalRules",20],["doLists",40],["doCodeBlocks",50],["doBlockQuotes",60]],this.span_gamut=[["parseSpan",-30],["doImages",10],["doAnchors",20],["doAutoLinks",30],["encodeAmpsAndAngles",40],["doItalicsAndBold",50],["doHardBreaks",60]],this.em_relist=[["","(?:(^|[^\\*])(\\*)(?=[^\\*])|(^|[^_])(_)(?=[^_]))(?=\\S|$)(?![\\.,:;]\\s)"],["*","((?:\\S|^)[^\\*])(\\*)(?!\\*)"],["_","((?:\\S|^)[^_])(_)(?!_)"]],this.strong_relist=[["","(?:(^|[^\\*])(\\*\\*)(?=[^\\*])|(^|[^_])(__)(?=[^_]))(?=\\S|$)(?![\\.,:;]\\s)"],["**","((?:\\S|^)[^\\*])(\\*\\*)(?!\\*)"],["__","((?:\\S|^)[^_])(__)(?!_)"]],this.em_strong_relist=[["","(?:(^|[^\\*])(\\*\\*\\*)(?=[^\\*])|(^|[^_])(___)(?=[^_]))(?=\\S|$)(?![\\.,:;]\\s)"],["***","((?:\\S|^)[^\\*])(\\*\\*\\*)(?!\\*)"],["___","((?:\\S|^)[^_])(___)(?!_)"]]}function MarkdownExtra_Parser(){this.fn_id_prefix="",this.fn_link_title=MARKDOWN_FN_LINK_TITLE,this.fn_backlink_title=MARKDOWN_FN_BACKLINK_TITLE,this.fn_link_class=MARKDOWN_FN_LINK_CLASS,this.fn_backlink_class=MARKDOWN_FN_BACKLINK_CLASS,this.predef_abbr={},this.footnotes={},this.footnotes_ordered=[],this.abbr_desciptions={},this.abbr_word_re="",this.footnote_counter=1,this.block_tags_re="p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|address|form|fieldset|iframe|hr|legend",this.context_block_tags_re="script|noscript|math|ins|del",this.contain_span_tags_re="p|h[1-6]|li|dd|dt|td|th|legend|address",this.clean_tags_re="script|math",this.auto_close_tags_re="hr|img",this.em_relist=[["","(?:(^|[^\\*])(\\*)(?=[^\\*])|(^|[^a-zA-Z0-9_])(_)(?=[^_]))(?=\\S|$)(?![\\.,:;]\\s)"],["*","((?:\\S|^)[^\\*])(\\*)(?!\\*)"],["_","((?:\\S|^)[^_])(_)(?![a-zA-Z0-9_])"]],this.strong_relist=[["","(?:(^|[^\\*])(\\*\\*)(?=[^\\*])|(^|[^a-zA-Z0-9_])(__)(?=[^_]))(?=\\S|$)(?![\\.,:;]\\s)"],["**","((?:\\S|^)[^\\*])(\\*\\*)(?!\\*)"],["__","((?:\\S|^)[^_])(__)(?![a-zA-Z0-9_])"]],this.em_strong_relist=[["","(?:(^|[^\\*])(\\*\\*\\*)(?=[^\\*])|(^|[^a-zA-Z0-9_])(___)(?=[^_]))(?=\\S|$)(?![\\.,:;]\\s)"],["***","((?:\\S|^)[^\\*])(\\*\\*\\*)(?!\\*)"],["___","((?:\\S|^)[^_])(___)(?![a-zA-Z0-9_])"]],this.escape_chars+=":|",this.document_gamut.push(["doFencedCodeBlocks",5]),this.document_gamut.push(["stripFootnotes",15]),this.document_gamut.push(["stripAbbreviations",25]),this.document_gamut.push(["appendFootnotes",50]),this.block_gamut.push(["doFencedCodeBlocks",5]),this.block_gamut.push(["doTables",15]),this.block_gamut.push(["doDefLists",45]),this.span_gamut.push(["doFootnotes",5]),this.span_gamut.push(["doAbbreviations",70])}!function(e){function t(e){var t=e.__resizeTriggers__,r=t.firstElementChild,n=t.lastElementChild,i=r.firstElementChild;n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight,i.style.width=r.offsetWidth+1+"px",i.style.height=r.offsetHeight+1+"px",r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight}function r(e){return e.offsetWidth!=e.__resizeLast__.width||e.offsetHeight!=e.__resizeLast__.height}function n(e){var n=this;t(this),this.__resizeRAF__&&l(this.__resizeRAF__),this.__resizeRAF__=h(function(){r(n)&&(n.__resizeLast__.width=n.offsetWidth,n.__resizeLast__.height=n.offsetHeight,n.__resizeListeners__.forEach(function(t){t.call(n,e)}))})}function i(){if(!a){var e=(E?E:"")+".resize-triggers { "+(b?b:"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e)),t.appendChild(r),a=!0}}var s=document.attachEvent,a=!1,o=e.fn.resize;if(e.fn.resize=function(e){return this.each(function(){this==window?o.call(jQuery(this),e):addResizeListener(this,e)})},e.fn.removeResize=function(e){return this.each(function(){removeResizeListener(this,e)})},!s){var h=function(){var e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return window.setTimeout(e,20)};return function(t){return e(t)}}(),l=function(){var e=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout;return function(t){return e(t)}}(),p=!1,c="animation",d="",_="animationstart",u="Webkit Moz O ms".split(" "),f="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),g="",m=document.createElement("fakeelement");if(void 0!==m.style.animationName&&(p=!0),p===!1)for(var w=0;w<u.length;w++)if(void 0!==m.style[u[w]+"AnimationName"]){g=u[w],c=g+"Animation",d="-"+g.toLowerCase()+"-",_=f[w],p=!0;break}var v="resizeanim",E="@"+d+"keyframes "+v+" { from { opacity: 0; } to { opacity: 0; } } ",b=d+"animation: 1ms "+v+"; "}window.addResizeListener=function(e,r){s?e.attachEvent("onresize",r):(e.__resizeTriggers__||("static"==getComputedStyle(e).position&&(e.style.position="relative"),i(),e.__resizeLast__={},e.__resizeListeners__=[],(e.__resizeTriggers__=document.createElement("div")).className="resize-triggers",e.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',e.appendChild(e.__resizeTriggers__),t(e),e.addEventListener("scroll",n,!0),_&&e.__resizeTriggers__.addEventListener(_,function(r){r.animationName==v&&t(e)})),e.__resizeListeners__.push(r))},window.removeResizeListener=function(e,t){s?e.detachEvent("onresize",t):(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),e.__resizeListeners__.length||(e.removeEventListener("scroll",n),e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)))}}(jQuery);var MARKDOWN_VERSION="1.0.1o",MARKDOWNEXTRA_VERSION="1.2.5",MARKDOWN_EMPTY_ELEMENT_SUFFIX=" />",MARKDOWN_TAB_WIDTH=4,MARKDOWN_FN_LINK_TITLE="",MARKDOWN_FN_BACKLINK_TITLE="",MARKDOWN_FN_LINK_CLASS="",MARKDOWN_FN_BACKLINK_CLASS="",MARKDOWN_WP_POSTS=!0,MARKDOWN_WP_COMMENTS=!0;MARKDOWN_PARSER_CLASS="MarkdownExtra_Parser",Markdown_Parser.prototype.init=function(){function e(e,t){return e=e[1],t=t[1],e>t?1:t>e?-1:0}this.prepareItalicsAndBold(),this.nested_brackets_re="(?:\\[[^\\]]*]|[^\\[\\]]*)",this.nested_url_parenthesis_re="(?:\\([^\\)\\s]*\\)|[^\\(\\)]*)";for(var t=[],r=0;r<this.escape_chars.length;r++)t.push(this._php_preg_quote(this.escape_chars.charAt(r)));this.escape_chars_re="["+t.join("")+"]",this.empty_element_suffix=MARKDOWN_EMPTY_ELEMENT_SUFFIX,this.tab_width=MARKDOWN_TAB_WIDTH,this.no_markup=!1,this.no_entities=!1,this.predef_urls={},this.predef_titles={},this.document_gamut.sort(e),this.block_gamut.sort(e),this.span_gamut.sort(e),this.urls={},this.titles={},this.html_hashes={},this.in_anchor=!1},Markdown_Parser.prototype.__wrapSTXETX__=function(e){return""!=e.charAt(0)&&(e=""+e),""!=e.charAt(e.length-1)&&(e+=""),e},Markdown_Parser.prototype.__unwrapSTXETX__=function(e){return""==e.charAt(0)&&(e=e.substr(1)),""==e.charAt(e.length-1)&&(e=e.substr(0,e.length-1)),e},Markdown_Parser.prototype._php_preg_quote=function(e){return arguments.callee.sRE||(arguments.callee.sRE=/(\/|\.|\*|\+|\?|\||\(|\)|\[|\]|\{|\}\\)/g),e.replace(arguments.callee.sRE,"\\$1")},Markdown_Parser.prototype._php_str_repeat=function(e,t){for(var r=e,n=1;t>n;n++)r+=e;return r},Markdown_Parser.prototype._php_trim=function(e,t){var r=t||" 	\n\r";return e.replace(new RegExp("^["+r+"]*|["+r+"]*$","g"),"")},Markdown_Parser.prototype._php_rtrim=function(e,t){var r=t||" 	\n\r";return e.replace(new RegExp("["+r+"]*$","g"),"")},Markdown_Parser.prototype._php_htmlspecialchars_ENT_NOQUOTES=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},Markdown_Parser.prototype.setup=function(){this.urls=this.predef_urls,this.titles=this.predef_titles,this.html_hashes={},this.in_anchor=!1},Markdown_Parser.prototype.teardown=function(){this.urls={},this.titles={},this.html_hashes={}},Markdown_Parser.prototype.transform=function(e){this.setup(),e=e.replace(/^\xEF\xBB\xBF|\x1A/,""),e=e.replace(/\r\n?/g,"\n",e),e+="\n\n",e=this.detab(e),e=this.hashHTMLBlocks(e),e=e.replace(/^[ ]+$/m,"");for(var t=0;t<this.document_gamut.length;t++){var r=this[this.document_gamut[t][0]];r?e=r.call(this,e):console.log(this.document_gamut[t][0]+" not implemented")}return this.teardown(),e+"\n"},Markdown_Parser.prototype.hashHTMLBlocks=function(e){if(this.no_markup)return e;var t=this.tab_width-1,r="ins|del",n="p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|address|script|noscript|form|fieldset|iframe|math",i=4,s='(?:\\s(?:[^>"/]+|/+(?!>)|"[^"]*"|\'[^\']*\')*)?',a=this._php_str_repeat("(?:[^<]+|<\\2"+s+"(?:/>|>",i)+".*?"+this._php_str_repeat("</\\2\\s*>)|<(?!/\\2\\s*>))*",i),o=a.replace("\\2","\\3"),h=new RegExp("(?:(?:(?:\\n\\n)|(?:\\x02)\\n?)([ ]{0,"+t+"}<("+n+")"+s+">"+a+"</\\2>[ ]*(?=\\n+|\\n*\\x03)|[ ]{0,"+t+"}<("+r+")"+s+">[ ]*\\n"+o+"</\\3>[ ]*(?=\\n+|\\n*\\x03)|[ ]{0,"+t+"}<(hr)"+s+"/?>[ ]*(?=\\n{2,}|\\n*\\x03)|[ ]{0,"+t+"}(?:<!--.*?-->)[ ]*(?=\\n{2,}|\\n*\\x03)|[ ]{0,"+t+"}(?:<([?%]).*?\\2>)[ ]*(?=\\n{2,}|\\n*\\x03)))","mig"),l=this;return e=this.__wrapSTXETX__(e),e=e.replace(h,function(e,t){var r=l.hashBlock(t);return"\n\n"+r+"\n\n"}),e=this.__unwrapSTXETX__(e)},Markdown_Parser.prototype.hashPart=function(e,t){"undefined"==typeof t&&(t="X"),e=this.unhash(e),"undefined"==typeof arguments.callee.i&&(arguments.callee.i=0);var r=t+""+ ++arguments.callee.i+t;return this.html_hashes[r]=e,r},Markdown_Parser.prototype.hashBlock=function(e){return this.hashPart(e,"B")},Markdown_Parser.prototype.stripLinkDefinitions=function(e){var t=this.tab_width-1,r=this;return e=this.__wrapSTXETX__(e),e=e.replace(new RegExp("^[ ]{0,"+t+'}\\[(.+)\\][ ]?:[ ]*\\n?[ ]*(?:<(.+?)>|(\\S+?))[ ]*\\n?[ ]*(?:["\\(](.*?)["\\)][ ]*)?(?:\\n+|\\n*(?=\\x03))',"mg"),function(e,t,n,i,s){var a=t.toLowerCase(),o=n?n:i;return r.urls[a]=o,r.titles[a]=s,""}),e=this.__unwrapSTXETX__(e)},Markdown_Parser.prototype.runBlockGamut=function(e){return e=this.hashHTMLBlocks(e),this.runBasicBlockGamut(e)},Markdown_Parser.prototype.runBasicBlockGamut=function(e){for(var t=0;t<this.block_gamut.length;t++){var r=this[this.block_gamut[t][0]];r?e=r.call(this,e):console.log(this.block_gamut[t][0]+" not implemented")}return e=this.formParagraphs(e)},Markdown_Parser.prototype.doHorizontalRules=function(e){var t=this;return e.replace(new RegExp("^[ ]{0,3}([-\\*_])(?:[ ]{0,2}\\1){2,}[ ]*$","mg"),function(){return"\n"+t.hashBlock("<hr"+t.empty_element_suffix)+"\n"})},Markdown_Parser.prototype.runSpanGamut=function(e){for(var t=0;t<this.span_gamut.length;t++){var r=this[this.span_gamut[t][0]];r?e=r.call(this,e):console.log(this.span_gamut[t][0]+" not implemented")}return e},Markdown_Parser.prototype.doHardBreaks=function(e){var t=this;return e.replace(/ {2,}\n/gm,function(){return t.hashPart("<br"+t.empty_element_suffix+"\n")})},Markdown_Parser.prototype.doAnchors=function(e){if(this.in_anchor)return e;this.in_anchor=!0;var t=this,r=function(e,r,n,i){("string"!=typeof i||""===i)&&(i=n),i=i.toLowerCase(),i=i.replace(/[ ]?\n/," ");var s;if("undefined"!=typeof t.urls[i]){var a=t.urls[i];if(a=t.encodeAttribute(a),s='<a href="'+a+'"',"undefined"!=typeof t.titles[i]){var o=t.titles[i];o=t.encodeAttribute(o),s+=' title="'+o+'"'}n=t.runSpanGamut(n),s+=">"+n+"</a>",s=t.hashPart(s)}else s=r;return s},n=e.replace(/[^\[^\]^\n^\s]/gm,"");return(-1!==n.indexOf("[][]")||-1!==n.indexOf("[] []")||-1!==n.indexOf("[]\n[]"))&&(e=e.replace(new RegExp("(\\[("+this.nested_brackets_re+")\\][ ]?(?:\\n[ ]*)?\\[(.*?)\\])","mg"),r)),n=e.replace(/[^\(^\)^\[^\]^\s]/gm,"").replace(/\(.*?\)/,"()"),(-1!==n.indexOf("]()")||-1!==n.indexOf(']("")'))&&(e=e.replace(new RegExp("(\\[("+this.nested_brackets_re+")\\]\\([ \\n]*(?:<(.+?)>|("+this.nested_url_parenthesis_re+"))[ \\n]*((['\"])(.*?)\\6[ \\n]*)?\\))","mg"),function(e,r,n,i,s,a,o,h){n=t.runSpanGamut(n);var l=i?i:s;l=t.encodeAttribute(l);var p='<a href="'+l+'"';return"undefined"!=typeof h&&""!==h&&(h=t.encodeAttribute(h),p+=' title="'+h+'"'),n=t.runSpanGamut(n),p+=">"+n+"</a>",t.hashPart(p)})),e=e.replace(new RegExp("(\\[([^\\[\\]]+)\\])","mg"),r),this.in_anchor=!1,e},Markdown_Parser.prototype.doImages=function(e){var t=this;return cheatText=e.replace(/[^!^\[^\]^\n^\s]/gm,"").replace(/\[\s*\]/g,"[]"),(-1!==cheatText.indexOf("![][]")||-1!==cheatText.indexOf("![] []")||-1!==cheatText.indexOf("![]\n[]"))&&(e=e.replace(new RegExp("(!\\[("+this.nested_brackets_re+")\\][ ]?(?:\\n[ ]*)?\\[(.*?)\\])","mg"),function(e,r,n,i){i=i.toLowerCase(),("string"!=typeof i||""===i)&&(i=n.toLowerCase()),n=t.encodeAttribute(n);var s;if("undefined"!=typeof t.urls[i]){var a=t.encodeAttribute(t.urls[i]);if(s='<img src="'+a+'" alt="'+n+'"',"undefined"!=typeof t.titles[i]){var o=t.titles[i];o=t.encodeAttribute(o),s+=' title="'+o+'"'}s+=t.empty_element_suffix,s=t.hashPart(s)}else s=r;return s})),cheatText=e.replace(/[^!^\(^\)^\[^\]^\n^\s]/gm,"").replace(/\[\s*\]/g,"[]"),(-1!==cheatText.indexOf("]()")||-1!==cheatText.indexOf("] ()")||-1!==cheatText.indexOf("]\n()"))&&(e=e.replace(new RegExp("(!\\[("+this.nested_brackets_re+")\\]\\s?\\([ \\n]*(?:<(\\S*)>|("+this.nested_url_parenthesis_re+"))[ \\n]*((['\"])(.*?)\\6[ \\n]*)?\\))","mg"),function(e,r,n,i,s,a,o,h){var l=i?i:s;n=t.encodeAttribute(n),l=t.encodeAttribute(l);var p='<img src="'+l+'" alt="'+n+'"';return"undefined"!=typeof h&&""!==h&&(h=t.encodeAttribute(h),p+=' title="'+h+'"'),p+=t.empty_element_suffix,t.hashPart(p)})),e},Markdown_Parser.prototype.doHeaders=function(e){var t=this;return e=e.replace(/^(.+?)[ ]*\n(=+|-+)[ ]*\n+/gm,function(e,r,n){if("-"==n&&r.match(/^-(?: |$)/))return e;var i="="==n.charAt(0)?1:2,s="<h"+i+">"+t.runSpanGamut(r)+"</h"+i+">";return"\n"+t.hashBlock(s)+"\n\n"}),e=e.replace(new RegExp("^(\\#{1,6})[ ]*(.+?)[ ]*\\#*\\n+","mg"),function(e,r,n){var i=r.length,s="<h"+i+">"+t.runSpanGamut(n)+"</h"+i+">";return"\n"+t.hashBlock(s)+"\n\n"})},Markdown_Parser.prototype.doLists=function(e){for(var t=this.tab_width-1,r="[\\*\\+-]",n="\\d+[\\.]",i=this,s=function(e,t,s,a,o){var h=o.match(r)?"ul":"ol",l="ul"==h?r:n;t+="\n";var p=i.processListItems(t,l);return p=i.hashBlock("<"+h+">\n"+p+"</"+h+">"),"\n"+p+"\n\n"},a=[[r,n],[n,r]],o=0;o<a.length;o++){var h=a[o][0],l=a[o][1],p="((([ ]{0,"+t+"})("+h+")[ ]+)[\\s\\S]+?((?=\\x03)|\\n{2,}(?=\\S)(?![ ]*"+h+"[ ]+)|(?=\\n\\3"+l+"[ ]+)))";e=this.__wrapSTXETX__(e),e=this.list_level?e.replace(new RegExp("^"+p,"mg"),s):e.replace(new RegExp("(?:(?=\\n)\\n|\\x02\\n?)"+p,"mg"),s),e=this.__unwrapSTXETX__(e)}return e},Markdown_Parser.prototype.processListItems=function(e,t){"undefined"==typeof this.list_level&&(this.list_level=0),this.list_level++,e=this.__wrapSTXETX__(e),e=e.replace(/\n{2,}(?=\x03)/m,"\n"),e=this.__unwrapSTXETX__(e);var r=this;return e=this.__wrapSTXETX__(e),e=e.replace(new RegExp("(\\n)?([ ]*)("+t+"(?:[ ]+|(?=\\n)))([\\s\\S]*?)(?:(\\n+(?=\\n))|\\n)(?=\\n*(\\x03|\\2("+t+")(?:[ ]+|(?=\\n))))","gm"),function(e,t,n,i,s,a){return t||a||s.match(/\n{2,}/)?(s=n+r._php_str_repeat(" ",i.length)+s,s=r.runBlockGamut(r.outdent(s)+"\n")):(s=r.doLists(r.outdent(s)),s=s.replace(/\n+$/m,""),s=r.runSpanGamut(s)),"<li>"+s+"</li>\n"}),e=this.__unwrapSTXETX__(e),this.list_level--,e},Markdown_Parser.prototype.doCodeBlocks=function(e){var t=this;return e=this.__wrapSTXETX__(e),e=e.replace(new RegExp("(?:^|\\n\\n|(?=\\x02)\\n)?((?:(?=([ ]{"+this.tab_width+",}.*\\n+))\\2)+)((?=^[ ]{0,"+this.tab_width+"}\\S)|(?:\\n*(?=\\x03)))","mg"),function(e,r){return r=t.outdent(r),r=t._php_htmlspecialchars_ENT_NOQUOTES(r),r=t.__wrapSTXETX__(r),r=r.replace(/(?=\x02)\n+|\n+(?=\x03)/g,""),r=t.__unwrapSTXETX__(r),r="<pre><code>"+r+"\n</code></pre>","\n\n"+t.hashBlock(r)+"\n\n"}),e=this.__unwrapSTXETX__(e)},Markdown_Parser.prototype.makeCodeSpan=function(e){return e=this._php_htmlspecialchars_ENT_NOQUOTES(this._php_trim(e)),this.hashPart("<code>"+e+"</code>")},Markdown_Parser.prototype.prepareItalicsAndBold=function(){this.em_strong_prepared_relist={};for(var e=0;e<this.em_relist.length;e++)for(var t=this.em_relist[e][0],r=this.em_relist[e][1],n=0;n<this.strong_relist.length;n++){for(var i=this.strong_relist[n][0],s=this.strong_relist[n][1],a=[],o=0;o<this.em_strong_relist.length;o++){var h=this.em_strong_relist[o][0],l=this.em_strong_relist[o][1];t+i==h&&a.push(l)}a.push(r),a.push(s);var p=new RegExp("("+a.join("|")+")");this.em_strong_prepared_relist["rx_"+t+i]=p}},Markdown_Parser.prototype.doItalicsAndBold=function(e){for(var t="",r="",n=!1,i=[""],s=[],a="";;){var o=this.em_strong_prepared_relist["rx_"+t+r],h=e.match(o);if(h){for(var l=RegExp.leftContext,p=RegExp.rightContext,c="",d=h[1],_=2;_<h.length;_+=2)if("undefined"!=typeof h[_]&&""!=h[_]){c=h[_],d=h[_+1];break}i[0]+=l+c,a=d,e=p}else i[0]+=e,a="",e="";if(""==a){for(;s.length>0&&s[0].length>0;){i[1]+=s.shift();var u=i.shift();i[0]+=u}break}var f,g,m=a.length;if(n)3==m?(s.shift(),g=i.shift(),g=this.runSpanGamut(g),g="<strong><em>"+g+"</em></strong>",i[0]+=this.hashPart(g),t="",r=""):(s[0]=this._php_str_repeat(a.charAt(0),3-m),f=2==m?"strong":"em",g=i[0],g=this.runSpanGamut(g),g="<"+f+">"+g+"</"+f+">",i[0]=this.hashPart(g),"strong"==f?r="":t=""),n=!1;else if(3==m)if(""!=t)for(var w=0;2>w;++w){var v=s.shift();f=2==v.length?"strong":"em",g=i.shift(),g=this.runSpanGamut(g),g="<"+f+">"+g+"</"+f+">",i[0]=this.hashPart(g),"strong"==f?r="":t=""}else t=a.charAt(0),r=t+t,s.unshift(a),i.unshift(""),n=!0;else if(2==m)if(""!=r){if(1==s[0].length){i[1]+=s.shift();var u=i.shift();i[0]+=u}s.shift(),g=i.shift(),g=this.runSpanGamut(g),g="<strong>"+g+"</strong>",i[0]+=this.hashPart(g),r=""}else s.unshift(a),i.unshift(""),r=a;else""!=t?1==s[0].length?(s.shift(),g=i.shift(),g=this.runSpanGamut(g),g="<em>"+g+"</em>",i[0]+=this.hashPart(g),t=""):i[0]+=a:(s.unshift(a),i.unshift(""),t=a)}return i[0]},Markdown_Parser.prototype.doBlockQuotes=function(e){var t=this;return e=e.replace(new RegExp("((?:^[ ]*>[ ]?.+\\n(.+\\n)*\\n*)+)","mg"),function(e,r){return r=r.replace(/^[ ]*>[ ]?|^[ ]+$/gm,""),r=t.runBlockGamut(r),r=r.replace(/^/gm,"  "),r=r.replace(/(\\s*<pre>[\\s\\S]+?<\/pre>)/gm,function(e,t){return t=t.replace(/^  /m,"")}),"\n"+t.hashBlock("<blockquote>\n"+r+"\n</blockquote>")+"\n\n"})},Markdown_Parser.prototype.formParagraphs=function(e){e=this.__wrapSTXETX__(e),e=e.replace(/(?:\x02)\n+|\n+(?:\x03)/g,""),e=this.__unwrapSTXETX__(e);for(var t=e.split(/\n{2,}/m),r=0;r<t.length;r++){var n=t[r];if(""==n);else if(n.match(/^B\x1A[0-9]+B$/)){var i=n,s=this.html_hashes[i];i=s,t[r]=i}else n=this.runSpanGamut(n),n=n.replace(/^([ ]*)/,"<p>"),n+="</p>",t[r]=this.unhash(n)}return t.join("\n\n")},Markdown_Parser.prototype.encodeAttribute=function(e){return e=this.encodeAmpsAndAngles(e),e=e.replace(/"/g,"&quot;")},Markdown_Parser.prototype.encodeAmpsAndAngles=function(e){return e=this.no_entities?e.replace(/&/g,"&amp;"):e.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/,"&amp;"),e=e.replace(/</g,"&lt;")},Markdown_Parser.prototype.doAutoLinks=function(e){var t=this;return e=e.replace(/<((https?|ftp|dict):[^'">\s]+)>/i,function(e,r){var n=t.encodeAttribute(r),i='<a href="'+n+'">'+n+"</a>";return t.hashPart(i)}),e=e.replace(new RegExp('<(?:mailto:)?((?:[-!#$%&\'*+/=?^_`.{|}~\\w\\x80-\\xFF]+|".*?")\\@(?:[-a-z0-9\\x80-\\xFF]+(\\.[-a-z0-9\\x80-\\xFF]+)*\\.[a-z]+|\\[[\\d.a-fA-F:]+\\]))>',"i"),function(e,r){var n=t.encodeEmailAddress(r);return t.hashPart(n)})},Markdown_Parser.prototype.encodeEmailAddress=function(e){function t(e){var t=0;t=-1^t;for(var n=0;n<e.length;++n){var i=255&(t^e.charCodeAt(n)),s="0x"+r[i];t=t>>>8^s}return(-1^t)>>>0}"undefined"==typeof arguments.callee.crctable&&(arguments.callee.crctable="00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF "+"B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D".split(" "));var r=arguments.callee.crctable;e="mailto:"+e;var n,i=[];for(n=0;n<e.length;n++)i.push(e.charAt(n));var s=Math.floor(Math.abs(t(e)/e.length));for(n=0;n<i.length;n++){var a=i[n],o=a.charCodeAt(0);if(128>o){var h=s*(1+n)%100;h>90&&"@"!=a||(i[n]=45>h?"&#x"+o.toString(16)+";":"&#"+o.toString(10)+";")}}e=i.join("");var l=i.splice(7,i.length-1).join("");return e='<a href="'+e+'">'+l+"</a>"},Markdown_Parser.prototype.parseSpan=function(e){for(var t="",r=new RegExp("(\\\\"+this.escape_chars_re+"|`+"+(this.no_markup?"":"|<!--.*?-->|<\\?.*?\\?>|<%.*?%>|<[/!$]?[-a-zA-Z0-9:_]+(?=\\s(?=[^\"'>]+|\"[^\"]*\"|'[^']*')*)?>")+")");;){var n=e.match(r);if(!n){t+=e;break}if(RegExp.leftContext&&(t+=RegExp.leftContext),"`"!=RegExp.lastMatch.charAt(0)||"\\"!=RegExp.leftContext.charAt(RegExp.leftContext.length-1)){var i=this.handleSpanToken(RegExp.lastMatch,RegExp.rightContext);t+=i[0],e=i[1]}else t+=RegExp.lastMatch,e=RegExp.rightContext}return t},Markdown_Parser.prototype.handleSpanToken=function(e,t){switch(e.charAt(0)){case"\\":return[this.hashPart("&#"+e.charCodeAt(1)+";"),t];case"`":if(t.match(new RegExp("^([\\s\\S]*?[^`])"+this._php_preg_quote(e)+"(?!`)([\\s\\S]*)$","m"))){var r=RegExp.$1;t=RegExp.$2;var n=this.makeCodeSpan(r);return[this.hashPart(n),t]}return[e,t];default:return[this.hashPart(e),t]}},Markdown_Parser.prototype.outdent=function(e){return e.replace(new RegExp("^(\\t|[ ]{1,"+this.tab_width+"})","mg"),"")},Markdown_Parser.prototype.detab=function(e){var t=this;return e.replace(/^.*\t.*$/gm,function(e){var r=e.split("	");e=r.shift();for(var n=0;n<r.length;n++){var i=r[n],s=t.tab_width-e.length%t.tab_width;e+=t._php_str_repeat(" ",s)+i}return e})},Markdown_Parser.prototype.unhash=function(e){var t=this;return e.replace(/(.)\x1A[0-9]+\1/g,function(e){return t.html_hashes[e]})},MarkdownExtra_Parser.prototype=new Markdown_Parser,MarkdownExtra_Parser.prototype.setup=function(){this.constructor.prototype.setup.call(this),this.footnotes={},this.footnotes_ordered=[],this.abbr_desciptions={},this.abbr_word_re="",this.footnote_counter=1;for(var e in this.predef_abbr){var t=this.predef_abbr[e];""!=this.abbr_word_re&&(this.abbr_word_re+="|"),this.abbr_word_re+=this._php_preg_quote(e),this.abbr_desciptions[e]=this._php_trim(t)}},MarkdownExtra_Parser.prototype.teardown=function(){this.footnotes={},this.footnotes_ordered=[],this.abbr_desciptions={},this.abbr_word_re="",this.constructor.prototype.teardown.call(this)},MarkdownExtra_Parser.prototype.hashHTMLBlocks=function(e){var t=this._hashHTMLBlocks_inMarkdown(e);return e=t[0]},MarkdownExtra_Parser.prototype._hashHTMLBlocks_inMarkdown=function(e,t,r,n){if("undefined"==typeof t&&(t=0),"undefined"==typeof r&&(r=""),"undefined"==typeof n&&(n=!1),""===e)return["",""];var i,s=/(?:^\n?|\n\n)*$/,a=new RegExp("^([ ]*<!--.*?-->)?[ ]*\\n","m"),o=new RegExp("(</?("+this.block_tags_re+"|"+this.context_block_tags_re+"|"+this.clean_tags_re+"|(?!\\s)"+r+")(?:(?=[\\s\"'/a-zA-Z0-9])(?=(\".*?\"|'.*?'|.+?))\\3*?)?>|<!--.*?-->|<\\?.*?\\?>|<%.*?%>|<!\\[CDATA\\[.*?\\]\\]>|`+"+(n?"":"|(?:^[ ]*\\n|^|\\n[ ]*\\n)[ ]{"+(t+4)+"}[^\\n]*\\n(?=(?:[ ]{"+(t+4)+"}[^\\n]*|[ ]*)\\n)*|(?:^|\\n)[ ]{0,"+t+"}~~~+[ ]*\\n")+")","m"),h=0,l="";do{var p,c=e.match(o);if(p=c?[RegExp.leftContext,RegExp.lastMatch,RegExp.rightContext]:[e],n){var d=this.hashPart("",":"),_=d+"\n";p[0]=d+p[0].replace(/\n/g,_)+d}if(l+=p[0],!c){e="";break}var u=p[1];e=p[2];var f,g,m=this._php_preg_quote(u);if("`"==u.charAt(0))m=this._php_preg_quote(u),(i=e.match(new RegExp("^((?=(.+?|\\n[^\\n])))/1*?[^`]"+m+"[^`]")))?(l+=u+i[0],e=e.substr(i[0].length)):l+=u;else if(u.match(new RegExp("^\\n?[ ]{0,"+(t+3)+"}~")))m=this._php_preg_quote(this._php_trim(u)),(i=e.match(new RegExp("^(?:.*\\n)+?[ ]{0,"+t+"}"+m+"[ ]*\\n")))?(l+=u+i[0],e=e.substr(i[0].length)):l+=u;else if("\n"==u.charAt(0)||" "==u.charAt(0))l+=u;else if(u.match(new RegExp("^<(?:"+this.block_tags_re+")\\b"))||u.match(new RegExp("^<(?:"+this.context_block_tags_re+")\\b"))&&l.match(s)&&e.match(a))f=this._hashHTMLBlocks_inHTML(u+e,this.hashBlock,!0),g=f[0],e=f[1],l+="\n\n"+g+"\n\n";else if(u.match(new RegExp("^<(?:"+this.clean_tags_re+")\\b"))||"!"==u.charAt(1)||"?"==u.charAt(1))f=this._hashHTMLBlocks_inHTML(u+e,this.hashClean,!1),g=f[0],e=f[1],l+=g;else if(""!==r&&u.match(new RegExp("^</?(?:"+r+")\\b"))){if("/"==u.charAt(1)?h--:"/"!=u.charAt(u.length-2)&&h++,0>h){e=u+e;break}l+=u}else l+=u}while(h>=0);return[l,e]},MarkdownExtra_Parser.prototype._hashHTMLBlocks_inHTML=function(e,t,r){if(""===e)return["",""];var n,i=new RegExp("\\s*markdown\\s*=\\s*(?:([\"'])(.*?)\\1|([^\\s>]*))()"),s=new RegExp("(</?[\\w:$]+(?:(?=[\\s\"'/a-zA-Z0-9])(?:(?=(\".*?\"|'.*?'|.+?))\\4)*?)?>|<!--.*?-->|<\\?.*?\\?>|<%.*?%>|<!\\[CDATA\\[.*?\\]\\]>)"),a=e,o=0,h="",l="",p="";(n=e.match(/^<([\w:$]*)\b/))&&(p=n[1]);do{var c=e.match(s);if(!c)return[a.charAt(0),a.substr(1)];var d=[RegExp.leftContext,RegExp.lastMatch,RegExp.rightContext];h+=d[0];var _=d[1];if(e=d[2],_.match(new RegExp("^</?(?:"+this.auto_close_tags_re+")\\b"))||"!"==_.charAt(1)||"?"==_.charAt(1))h+=_;else{_.match(new RegExp("^</?"+p+"\\b"))&&("/"==_.charAt(1)?o--:"/"!=_.charAt(_.length-2)&&o++);var u;if(r&&(u=_.match(i))&&(u[2]+u[3]).match(/^1|block|span$/)){_=_.replace(i,""),this.mode=u[2]+u[3];var f,g="span"==this.mode||"block"!=this.mode&&_.match(new RegExp("^<(?:"+this.contain_span_tags_re+")\\b"));f=(n=h.match(/(?:^|\n)( *?)(?! ).*?$/))?n[1].length:0,h+=_,l+=t.call(this,h),n=_.match(/^<([\w:$]*)\b/);var m=n[1],w=this._hashHTMLBlocks_inMarkdown(e,f,m,g);h=w[0],e=w[1],f>0&&(h=h.replace(new RegExp("/^[ ]{1,"+f+"}","m"),"")),l+=g?h:"\n\n"+h+"\n\n",h=""}else h+=_}}while(o>0);return l+=t.call(this,h),[l,e]},MarkdownExtra_Parser.prototype.hashClean=function(e){return this.hashPart(e,"C")},MarkdownExtra_Parser.prototype.doHeaders=function(e){function t(e){return"undefined"==typeof e||""==e?"":' id="'+e+'"'}var r=this;return e=e.replace(new RegExp("(^.+?)(?:[ ]+\\{\\#([-_:a-zA-Z0-9]+)\\})?[ ]*\\n(=+|-+)[ ]*\\n+","mg"),function(e,n,i,s){if("-"==s&&n.match(/^- /))return e;var a="="==s.charAt(0)?1:2,o=t(i),h="<h"+a+o+">"+r.runSpanGamut(n)+"</h"+a+">";return"\n"+r.hashBlock(h)+"\n\n"}),e=e.replace(new RegExp("^(\\#{1,6})[ ]*(.+?)[ ]*\\#*(?:[ ]+\\{\\#([-_:a-zA-Z0-9]+)\\})?\\n+","mg"),function(e,n,i,s){var a=n.length,o=t(s),h="<h"+a+o+">"+r.runSpanGamut(i)+"</h"+a+">";return"\n"+r.hashBlock(h)+"\n\n"})},MarkdownExtra_Parser.prototype.doTables=function(e){var t=this,r=this.tab_width-1,n=function(e,r,n,i){r=r.replace(/[|] *$/m,""),n=n.replace(/[|] *$/m,""),i=i.replace(/[|] *$/m,"");var s,a=[],o=n.split(/[ ]*[|][ ]*/);for(s=0;s<o.length;s++){var h=o[s];a[s]=h.match(/^ *-+: *$/)?' align="right"':h.match(/^ *:-+: *$/)?' align="center"':h.match(/^ *:-+ *$/)?' align="left"':""}r=t.parseSpan(r);var l=r.split(/ *[|] */),p=l.length,c="<table>\n";for(c+="<thead>\n",c+="<tr>\n",s=0;s<l.length;s++){var d=l[s];c+="  <th"+a[s]+">"+t.runSpanGamut(t._php_trim(d))+"</th>\n"}c+="</tr>\n",c+="</thead>\n";var _=t._php_trim(i,"\n").split("\n");c+="<tbody>\n";for(var u=0;u<_.length;u++){var f=_[u];f=t.parseSpan(f);for(var g=f.split(/ *[|] */,p);g.length<p;)g.push("");for(c+="<tr>\n",s=0;s<g.length;s++){var m=g[s];c+="  <td"+a[s]+">"+t.runSpanGamut(t._php_trim(m))+"</td>\n"}c+="</tr>\n"}return c+="</tbody>\n",c+="</table>",t.hashBlock(c)+"\n"};return e=this.__wrapSTXETX__(e),e=e.replace(new RegExp("^[ ]{0,"+r+"}[|](.+)\\n[ ]{0,"+r+"}[|]([ ]*[-:]+[-| :]*)\\n((?:[ ]*[|].*\\n)*)(?=\\n|\\x03)","mg"),function(e,t,r,i){return i=i.replace(/^ *[|]/m,""),n.call(this,e,t,r,i)}),e=e.replace(new RegExp("^[ ]{0,"+r+"}(\\S.*[|].*)\\n[ ]{0,"+r+"}([-:]+[ ]*[|][-| :]*)\\n((?:.*[|].*\\n)*)(?=\\n|\\x03)","mg"),n),e=this.__unwrapSTXETX__(e)},MarkdownExtra_Parser.prototype.doDefLists=function(e){var t=this,r=this.tab_width-1,n="(?:(([ ]{0,"+r+"}((?:[ \\t]*\\S.*\\n)+)\\n?[ ]{0,"+r+"}:[ ]+)([\\s\\S]+?)((?=\\0x03)|(?=\\n{2,}(?=\\S)(?![ ]{0,"+r+"}(?:\\S.*\\n)+?\\n?[ ]{0,"+r+"}:[ ]+)(?![ ]{0,"+r+"}:[ ]+)))))";return e=this.__wrapSTXETX__(e),e=e.replace(new RegExp("(\\x02\\n?|\\n\\n)"+n,"mg"),function(e,r,n){var i=t._php_trim(t.processDefListItems(n));return i="<dl>\n"+i+"\n</dl>",r+t.hashBlock(i)+"\n\n"}),e=this.__unwrapSTXETX__(e)},MarkdownExtra_Parser.prototype.processDefListItems=function(e){var t=this,r=this.tab_width-1;return e=this.__wrapSTXETX__(e),e=e.replace(/\n{2,}(?=\\x03)/,"\n"),e=e.replace(new RegExp("(\\x02\\n?|\\n\\n+)([ ]{0,"+r+"}(?![:][ ]|[ ])(?:\\S.*\\n)+?)(?=\\n?[ ]{0,3}:[ ])","mg"),function(e,r,n){for(var i=t._php_trim(n).split("\n"),s="",a=0;a<i.length;a++){var o=i[a];o=t.runSpanGamut(t._php_trim(o)),s+="\n<dt>"+o+"</dt>"}return s+"\n"}),e=e.replace(new RegExp("\\n(\\n+)?([ ]{0,"+r+"}[:][ ]+)([\\s\\S]+?)(?=\\n*(?:\\n[ ]{0,"+r+"}[:][ ]|<dt>|\\x03))","mg"),function(e,r,n,i){return r||i.match(/\n{2,}/)?(i=t._php_str_repeat(" ",n.length)+i,i=t.runBlockGamut(t.outdent(i+"\n\n")),i="\n"+i+"\n"):(i=t._php_rtrim(i),i=t.runSpanGamut(t.outdent(i))),"\n<dd>"+i+"</dd>\n"}),e=this.__unwrapSTXETX__(e)},MarkdownExtra_Parser.prototype.doFencedCodeBlocks=function(e){{var t=this;this.tab_width}return e=this.__wrapSTXETX__(e),e=e.replace(new RegExp("(?:\\n|\\x02)(~{3,})[ ]*\\n((?:(?=((?!\\1[ ]*\\n).*\\n+))\\3)+)\\1[ ]*\\n","mg"),function(e,r,n){return n=t._php_htmlspecialchars_ENT_NOQUOTES(n),n=n.replace(/^\n+/,function(e){return t._php_str_repeat("<br"+t.empty_element_suffix,e.length)}),n="<pre><code>"+n+"</code></pre>","\n\n"+t.hashBlock(n)+"\n\n"}),e=this.__unwrapSTXETX__(e)},MarkdownExtra_Parser.prototype.formParagraphs=function(e){e=this.__wrapSTXETX__(e),e=e.replace(/(?:\x02)\n+|\n+(?:\x03)/g,""),e=this.__unwrapSTXETX__(e);
for(var t=e.split(/\n{2,}/m),r=0;r<t.length;r++){var n=t[r];if(""!=n){n=this._php_trim(this.runSpanGamut(n));var i=!n.match(/^B\x1A[0-9]+B|^C\x1A[0-9]+C$/);i&&(n="<p>"+n+"</p>"),t[r]=n}}return e=t.join("\n\n"),e=this.unhash(e)},MarkdownExtra_Parser.prototype.stripFootnotes=function(e){var t=this,r=this.tab_width-1;return e=e.replace(new RegExp("^[ ]{0,"+r+"}\\[\\^(.+?)\\][ ]?:[ ]*\\n?((?:.+|\\n(?!\\[\\^.+?\\]:\\s)(?!\\n+[ ]{0,3}\\S))*)","mg"),function(e,r,n){var i=t.fn_id_prefix+r;return t.footnotes[i]=t.outdent(n),""})},MarkdownExtra_Parser.prototype.doFootnotes=function(e){return this.in_anchor||(e=e.replace(/\[\^(.+?)\]/g,"Ffn:$1:")),e},MarkdownExtra_Parser.prototype.appendFootnotes=function(e){var t=this,r=function(e,r){var n=t.fn_id_prefix+r;if(n in t.footnotes){t.footnotes_ordered.push([n,t.footnotes[n]]),delete t.footnotes[n];var i=t.footnote_counter++,s=' rel="footnote"';if(""!=t.fn_link_class){var a=t.fn_link_class;a=t.encodeAttribute(a),s+=' class="'+a+'"'}if(""!=t.fn_link_title){var o=t.fn_link_title;o=t.encodeAttribute(o),s+=' title="'+o+'"'}return s=s.replace(/%%/g,i),n=t.encodeAttribute(n),'<sup id="fnref:'+n+'"><a href="#fn:'+n+'"'+s+">"+i+"</a></sup>"}return"[^"+r+"]"};if(e=e.replace(/F\x1Afn:(.*?)\x1A:/g,r),this.footnotes_ordered.length>0){e+="\n\n",e+='<div class="footnotes">\n',e+="<hr"+this.empty_element_suffix+"\n",e+="<ol>\n\n";var n=' rev="footnote"';if(""!=this.fn_backlink_class){var i=this.fn_backlink_class;i=this.encodeAttribute(i),n+=' class="'+i+'"'}if(""!=this.fn_backlink_title){var s=this.fn_backlink_title;s=this.encodeAttribute(s),n+=' title="'+s+'"'}for(var a=0;this.footnotes_ordered.length>0;){var o=this.footnotes_ordered.shift(),h=o[0],l=o[1];l+="\n",l=this.runBlockGamut(l+"\n"),l=l.replace(/F\x1Afn:(.*?)\x1A:/g,r),n=n.replace(/%%/g,++a),h=this.encodeAttribute(h);var p='<a href="#fnref:'+h+'"'+n+">&#8617;</a>";l.match(/<\/p>$/)?l=l.substr(0,l.length-4)+"&#160;"+p+"</p>":l+="\n\n<p>"+p+"</p>",e+='<li id="fn:'+h+'">\n',e+=l+"\n",e+="</li>\n\n"}e+="</ol>\n",e+="</div>"}return e},MarkdownExtra_Parser.prototype.stripAbbreviations=function(e){var t=this,r=this.tab_width-1;return e=e.replace(new RegExp("^[ ]{0,"+r+"}\\*\\[(.+?)\\][ ]?:(.*)","m"),function(e,r,n){return""!=t.abbr_word_re&&(t.abbr_word_re+="|"),t.abbr_word_re+=t._php_preg_quote(r),t.abbr_desciptions[r]=t._php_trim(n),""})},MarkdownExtra_Parser.prototype.doAbbreviations=function(e){var t=this;return this.abbr_word_re&&(e=e.replace(new RegExp("(^|[^\\w\\x1A])("+this.abbr_word_re+")(?![\\w\\x1A])"),function(e,r,n){if(n in t.abbr_desciptions){var i=t.abbr_desciptions[n];return i&&""!=i?(i=t.encodeAttribute(i),t.hashPart('<abbr title="'+i+'">'+n+"</abbr>")):t.hashPart("<abbr>"+n+"</abbr>")}return e})),e},this.Markdown=Markdown,this.Markdown_Parser=Markdown_Parser,this.MarkdownExtra_Parser=MarkdownExtra_Parser,function(e){function t(e,t){var r=typeof e[t];return"function"===r||!("object"!=r||!e[t])||"unknown"==r}function r(e,t){return typeof e[t]!=m}function n(e,t){return!("object"!=typeof e[t]||!e[t])}function i(e){window.console&&window.console.log&&window.console.log("RangyInputs not supported in your browser. Reason: "+e)}function s(e,t,r){return 0>t&&(t+=e.value.length),typeof r==m&&(r=t),0>r&&(r+=e.value.length),{start:t,end:r}}function a(e,t,r){return{start:t,end:r,length:r-t,text:e.value.slice(t,r)}}function o(){return n(document,"body")?document.body:document.getElementsByTagName("body")[0]}var h,l,p,c,d,_,u,f,g,m="undefined";e(document).ready(function(){function w(e,t){var r=e.value,n=h(e),i=n.start;return{value:r.slice(0,i)+t+r.slice(n.end),index:i,replaced:n.text}}function v(e,t){e.focus();var r=h(e);return l(e,r.start,r.end),""==t?document.execCommand("delete",!1,null):document.execCommand("insertText",!1,t),{replaced:r.text,index:r.start}}function E(e,t){e.focus();var r=w(e,t);return e.value=r.value,r}function b(e,t){return function(){var r=this.jquery?this[0]:this,n=r.nodeName.toLowerCase();if(1==r.nodeType&&("textarea"==n||"input"==n&&/^(?:text|email|number|search|tel|url|password)$/i.test(r.type))){var i=[r].concat(Array.prototype.slice.call(arguments)),s=e.apply(this,i);if(!t)return s}return t?this:void 0}}var x=document.createElement("textarea");if(o().appendChild(x),r(x,"selectionStart")&&r(x,"selectionEnd"))h=function(e){var t=e.selectionStart,r=e.selectionEnd;return a(e,t,r)},l=function(e,t,r){var n=s(e,t,r);e.selectionStart=n.start,e.selectionEnd=n.end},g=function(e,t){t?e.selectionEnd=e.selectionStart:e.selectionStart=e.selectionEnd};else{if(!(t(x,"createTextRange")&&n(document,"selection")&&t(document.selection,"createRange")))return o().removeChild(x),void i("No means of finding text input caret position");h=function(e){var t,r,n,i,s=0,o=0,h=document.selection.createRange();return h&&h.parentElement()==e&&(n=e.value.length,t=e.value.replace(/\r\n/g,"\n"),r=e.createTextRange(),r.moveToBookmark(h.getBookmark()),i=e.createTextRange(),i.collapse(!1),r.compareEndPoints("StartToEnd",i)>-1?s=o=n:(s=-r.moveStart("character",-n),s+=t.slice(0,s).split("\n").length-1,r.compareEndPoints("EndToEnd",i)>-1?o=n:(o=-r.moveEnd("character",-n),o+=t.slice(0,o).split("\n").length-1))),a(e,s,o)};var A=function(e,t){return t-(e.value.slice(0,t).split("\r\n").length-1)};l=function(e,t,r){var n=s(e,t,r),i=e.createTextRange(),a=A(e,n.start);i.collapse(!0),n.start==n.end?i.move("character",a):(i.moveEnd("character",A(e,n.end)),i.moveStart("character",a)),i.select()},g=function(e,t){var r=document.selection.createRange();r.collapse(t),r.select()}}o().removeChild(x);var B=function(e,t){var r=w(e,t);try{var n=v(e,t);if(e.value==r.value)return B=v,n}catch(i){}return B=E,e.value=r.value,r};c=function(e,t,r,n){t!=r&&(l(e,t,r),B(e,"")),n&&l(e,t)},p=function(e){l(e,B(e,"").index)},f=function(e){var t=B(e,"");return l(e,t.index),t.replaced};var k=function(e,t,r,n){var i=t+r.length;if(n="string"==typeof n?n.toLowerCase():"",("collapsetoend"==n||"select"==n)&&/[\r\n]/.test(r)){var s=r.replace(/\r\n/g,"\n").replace(/\r/g,"\n");i=t+s.length;var a=t+s.indexOf("\n");"\r\n"==e.value.slice(a,a+2)&&(i+=s.match(/\n/g).length)}switch(n){case"collapsetostart":l(e,t,t);break;case"collapsetoend":l(e,i,i);break;case"select":l(e,t,i)}};d=function(e,t,r,n){l(e,r),B(e,t),"boolean"==typeof n&&(n=n?"collapseToEnd":""),k(e,r,t,n)},_=function(e,t,r){var n=B(e,t);k(e,n.index,t,r||"collapseToEnd")},u=function(e,t,r,n){typeof r==m&&(r=t);var i=h(e),s=B(e,t+i.text+r);k(e,s.index+t.length,i.text,n||"select")},e.fn.extend({getSelection:b(h,!1),setSelection:b(l,!0),collapseSelection:b(g,!0),deleteSelectedText:b(p,!0),deleteText:b(c,!0),extractSelectedText:b(f,!1),insertText:b(d,!0),replaceSelectedText:b(_,!0),surroundSelectedText:b(u,!0)})})}(jQuery),function(e,t,r,n){"use strict";function i(e){t.console&&f&&t.console.log(e)}function s(e,t,r){var n=e.editor,i=function(){var e=n.val(),r=n.getSelection(),i=t.before||"",s=t.placeholder||"",a=t.after||"";if(t.preselectLine){var o=e.lastIndexOf("\n",r.start)+1,h=e.indexOf("\n",r.end);-1===h&&(h=e.length),n.setSelection(o,h),r=n.getSelection()}if(r.length>0&&(s=r.text),t.isBlock)for(var l=0;2>l;l++){var p=e.charAt(r.start-1-l),c=e.charAt(r.end+l);"\n"!==p&&""!==p&&(i="\n"+i),"\n"!==c&&""!==c&&(a+="\n")}r.text!==s&&n.replaceSelectedText(s,"select"),n.surroundSelectedText(i,a,"select")};r.click(function(s){r.hasClass("disabled")||(t.click?t.click(e,t,r,i):i(),e.update()),n.focus(),s.preventDefault()})}function a(e){e.on("click",function(){e.siblings("li").removeClass(u+"_controlgroup-open").children("ul").hide(),e.toggleClass(u+"_controlgroup-open").children("ul").toggle()})}function o(t,r,h){var l=e("<ul />");h?(l.css("display","none"),l.addClass(u+"_controlgroup-"+r.name+" "+u+"_controlgroup-dropdown")):l.addClass("meltdown_controls");for(var p=0;p<r.length;p++){var c=r[p],d=e("<li />"),_=e("<span />").appendTo(d);if("string"===e.type(c)){if("|"===c){l.append(d.addClass(u+"_controlsep "+u+"_controlbutton"));continue}var f=e.meltdown.controlDefs[c];if(f===n){i("Control not found: "+c);continue}d.addClass(u+"_control-"+c+" "+u+"_control "+u+"_controlbutton "+(f.styleClass||"")),_.text(f.label).attr("title",f.altText),s(t,f,d)}else e.isArray(c)&&(d.addClass(u+"_controlgroup-"+c.name+" "+u+"_controlgroup "+u+"_controlbutton"),_.text(c.label).append('<i class="meltdown-icon-caret-down" />'),a(d),d.append(o(t,c,!0)));l.append(d)}return l}function h(t,r){r.click(function(r){var n=e('<div class"'+u+'_warning"/>').html('<center><b>The preview area is a tech preview feature</b></center><br/>Live previews <b>can</b> cause the browser tab to stop responding.<br/><br/>There is a <a target="_blank" href="https://github.com/iphands/Meltdown/issues/1">known issue</a> with <a target="_blank" href="https://github.com/tanakahisateru/js-markdown-extra#notice">one of the libraries</a> used to generate the live preview.<br/><br/>This warning will be removed when the issue is resolved.<br/><br/><center><i>Click to continue.</i></center>').css({background:"#fdd",cursor:"pointer"});n.on("click",function(r){e(r.target).is("a, a *")||t.update(!0)}),t.preview.empty().append(n),r.preventDefault()})}function l(e,t,r,n,i){e.addClass("meltdown_resizehandle-"+(n?"vert":"horiz"));var s,a,o,h,l,p=n?"height":"width",c=n?"pageY":"pageX",d=n?"lastEditorPercentHeight":"lastEditorPercentWidth",_=n?15:60,u=function(e){var _=Math.min(Math.max(e[c],a),o)-s,u=h+_,f=l-_;t[p](u),r[p](f),n||(t[0].style.maxWidth=u+"px",r[0].style.maxWidth=f+"px");var g=n?i.editor[0]:i.editorWrap[0],m=t[0]===g?u:f;i[d]=m/(u+f)};e.on("mousedown",function(e){if(i.isSidebyside()!==n){var d=t.add(r);t=d.first(),r=d.last(),s=e[c],h=t[p](),l=r[p](),a=s-h+_,o=s+l-_,v.on("mousemove",u).one("mouseup",function(){v.off("mousemove",u),E.removeClass("unselectable"),i.editor.focus()}),E.addClass("unselectable")}})}function p(e,t,r){var n,i,s,a=function(){e.apply(n,i)};return function(){return n=this,i=arguments,clearTimeout(s),s=setTimeout(a,t),r}}function c(e,t,r){return e!==!0&&e!==!1?!t:e===t?r?e:n:e}function d(e,t,r){var n=Math.round(t*e),i=e-n;return r>n?(i-=r-n,n=r):r>i&&(n-=r-i,i=r),{firstSize:n,lastSize:i}}for(var _="0.2",u="meltdown",f=!0,g=(r.all&&!r.addEventListener,[1,8,0]),m=e.fn.jquery.split(" ")[0].split("."),w=!1,v=e(r),E=e("body"),b=0;b<g.length;b++){var x=g[b],A=parseInt(m[b],10);if(x>A){isOldQuery=!0;break}if(A>x)break}var B=e('<div style="bottom: 0;" />'),k=function(e,t,r){return r.name=e,r.label=t,r};e.meltdown={version:_,controlsGroup:k,defaults:{controls:k("","",["preview","bold","italics","ul","ol","|","table",k("h","Headers",["h1","h2","h3","h4","h5","h6"]),"|",k("kitchenSink","Kitchen Sink",["link","img","blockquote","codeblock","code","footnote","hr"]),"fullscreen","sidebyside"]),fullscreen:!1,openPreview:!1,previewHeight:"editorHeight",previewCollapses:!0,sidebyside:!1,autoScrollPreview:!0,previewDuration:400,parser:t.Markdown},controlDefs:{bold:{label:"B",altText:"Bold",before:"**",after:"**"},italics:{label:"I",altText:"Italics",before:"*",after:"*"},ul:{label:"UL",altText:"Unordered List",preselectLine:!0,before:"* ",placeholder:"Item\n* Item",isBlock:!0},ol:{label:"OL",altText:"Ordered List",preselectLine:!0,before:"1. ",placeholder:"Item 1\n2. Item 2\n3. Item 3",isBlock:!0},table:{label:"Table",altText:"Table",before:"First Header  | Second Header\n------------- | -------------\nContent Cell  | Content Cell\nContent Cell  | Content Cell\n",isBlock:!0},link:{label:"Link",altText:"Link",before:"[",placeholder:"Example link",after:'](http:// "Link title")'},img:{label:"Image",altText:"Image",before:"![Alt text](",placeholder:"http://",after:")"},blockquote:{label:"Blockquote",altText:"Blockquote",preselectLine:!0,before:"> ",placeholder:"Quoted text",isBlock:!0},codeblock:{label:"Code Block",altText:"Code Block",preselectLine:!0,before:"~~~\n",placeholder:"Code",after:"\n~~~",isBlock:!0},code:{label:"Code",altText:"Inline Code",before:"`",placeholder:"code",after:"`"},footnote:{label:"Footnote",altText:"Footnote",before:"[^1]\n\n[^1]:",placeholder:"Example footnote",isBlock:!0},hr:{label:"HR",altText:"Horizontal Rule",before:"----------",placeholder:"",isBlock:!0},fullscreen:{label:"Fullscreen",altText:"Toggle fullscreen",click:function(e){e.toggleFullscreen()}},sidebyside:{label:"Sidebyside",altText:"Toggle sidebyside",click:function(e){e.toggleSidebyside()}},preview:{label:"Preview",altText:"Toggle preview",click:function(e){e.togglePreview()}}}},function(e){for(var t="",r=1;6>=r;r++)t+="#",e["h"+r]={label:"H"+r,altText:"Header "+r,preselectLine:!0,before:t+" "}}(e.meltdown.controlDefs);var C=e.meltdown.Meltdown=function(t){this.element=e(t)};e.meltdown.methods=e.extend(C.prototype,{_init:function(t){var r=this,i=this._options=e.extend({},e.meltdown.defaults,t);this._lastUpdateText="",this.parser=i.parser||function(e){return e},this.editorPreInitOuterWidth=this.element.outerWidth(),this.wrap=e('<div class="'+u+'_wrap previewopen" />'),this.topmargin=e('<div class="'+u+'_topmargin"/>').appendTo(this.wrap),this.bar=e('<div class="meltdown_bar"></div>').appendTo(this.wrap),this.editorWrap=e('<div class="'+u+'_editor-wrap" />').appendTo(this.wrap),this.editorDeco=e('<div class="'+u+'_editor-deco" />').appendTo(this.editorWrap),this.editor=this.element.addClass("meltdown_editor"),this.previewWrap=e('<div class="'+u+'_preview-wrap" />').appendTo(this.wrap),this.resizeHandle=e('<div class="'+u+'_resizehandle"><span></span></div>').appendTo(this.previewWrap),this.previewHeader=e('<span class="'+u+'_preview-header">Preview Area (<a class="meltdown_techpreview" href="https://github.com/iphands/Meltdown/issues/1">Tech Preview</a>)</span>').appendTo(this.previewWrap),this.preview=e('<div class="'+u+'_preview" />').appendTo(this.previewWrap),this.bottommargin=e('<div class="'+u+'_bottommargin"/>').appendTo(this.wrap),this.wrap.outerWidth(this.editorPreInitOuterWidth),w&&this.wrap.width(this.editorPreInitOuterWidth);var s=i.previewHeight;"editorHeight"===s&&(s=this.editor.height()),this.preview.height(s),this.controls=o(this,i.controls).appendTo(this.bar),h(this,this.previewHeader.find(".meltdown_techpreview")),this.editor.focus(function(){r.editorDeco.addClass("focus")}).blur(function(){r.editorDeco.removeClass("focus")}),this.previewWrap2=e('<div class="'+u+'_preview-wrap2"></div>').appendTo(this.previewWrap),this.previewWrap2.append(this.resizeHandle,this.previewHeader,this.preview),l(this.resizeHandle,this.editor,this.preview,!0,this),l(this.resizeHandle,this.editorWrap,this.previewWrap,!1,this),this.debouncedUpdate=p(this.update,350,this),this.editor.on("keyup",e.proxy(this.debouncedUpdate,this)),this.fullscreenData={},this.editor.after(this.wrap).appendTo(this.editorDeco),this._checkToolbarOverflowedControls(),this._previewCollapses=i.previewCollapses,this.togglePreview(!0,0,!0,!i.openPreview),this.isPreviewCollapses()||"auto"!==i.previewHeight||this.preview.height("+=0"),this._checkHeightsManaged("",n,!0);var a=this.wrap.height(),c=parseFloat(this.editor.css("minHeight"))+parseFloat(this.preview.css("minHeight")),d=this.editor.height();return s=this.preview.height(),this.wrap.css("minHeight",a-d-s+c),this.lastWrapWidth=this.wrap.width(),this.lastWrapHeight=a,this.lastEditorPercentWidth=.5,this.lastEditorPercentHeight=d/(d+s),addResizeListener(this.wrap[0],e.proxy(this._wrapResizeListener,this)),i.openPreview||this.togglePreview(!1,0),this.toggleSidebyside(i.sidebyside,!0),i.fullscreen&&this.toggleFullscreen(i.fullscreen),this},options:function(e,t){return 1===arguments.length?this._options[e]:arguments.length>1?(this._options[e]=t,this):void 0},update:function(e){return this.updateWith(this.editor.val(),e)},updateWith:function(e,t){if(t===!0||this.isPreviewOpen()&&e!==this._lastUpdateText){var r=this.preview[0],n=r.scrollHeight-r.scrollTop===r.clientHeight;this.preview.html(this.parser(e)),n&&(r.scrollTop=r.scrollHeight),this._lastUpdateText=e}return this},isPreviewOpen:function(){return this.wrap.hasClass("previewopen")},togglePreview:function(t,r,i,s){if(t=c(t,this.isPreviewOpen(),i),t===n)return this;r===n&&(r=this._options.previewDuration);var a=this,o=this.editor.height(),h=t?0:this.previewWrap.outerHeight(),l=o+h,p=this._isHeightsManaged()?function(){a.editor.height(l-a.previewWrap.outerHeight())}:e.noop,_=this.editorWrap.width(),u=t?0:this.previewWrap.width(),f=function(e){a.previewWrap[0].style.maxWidth=e+"px";var t=_+(u-e);a.editorWrap.width(t),a.editorWrap[0].style.maxWidth=t+"px"},g=function(){a.previewWrap.css("display","")};if(t)if(this.wrap.addClass("previewopen"),s||this.update(),this.isSidebyside())this.previewWrap.stop().animate({width:"show"},{duration:r,step:f,start:function(e){var t=d(a.wrap.width(),a.lastEditorPercentWidth,60);e.tweens[0].end=t.lastSize,g()},complete:g});else{var m=this.previewWrap.outerHeight();this._heightsManaged&&m>o-15&&this.preview.height("-="+(m-(o-15))),w?(this._heightsManaged&&this.editor.height("-="+m),this.previewWrap.stop().show(),g()):this.previewWrap.stop().slideDown({duration:r,progress:p,start:g,complete:g})}else this.isSidebyside()?this.previewWrap.stop().animate({width:"hide"},{duration:r,step:f,complete:function(){a.previewWrap.css("max-width","")}}):!w&&this.previewWrap.is(":visible")&&r>0?this.previewWrap.stop().slideUp({duration:r,progress:p}):(this.previewWrap.stop().hide(),this._heightsManaged&&this.editor.height(l)),this.wrap.removeClass("previewopen");return this},isFullscreen:function(){return this.wrap.hasClass("fullscreen")},toggleFullscreen:function(e){if(e=c(e,this.isFullscreen()),e===n)return this;var t=this.fullscreenData;if(e){t.originalWrapHeight=this.wrap.height(),t.availableHeight=this.editor.height()+this.preview.height(),t.originalWrapStyleHeight=this.wrap[0].style.height,this._checkHeightsManaged("fullscreen",!0),this.wrap.addClass("fullscreen");var r=this;v.on("keypress."+u+".fullscreenEscKey",function(e){27===e.keyCode&&r.toggleFullscreen(!1)})}else{if(v.off("keypress."+u+".fullscreenEscKey"),this.wrap.removeClass("fullscreen"),this._isHeightsManaged())this._adjustHeights(t.originalWrapHeight),this.lastWrapHeight=t.originalWrapHeight;else{var i=d(t.availableHeight,this.lastEditorPercentHeight,15);this.editor.height(i.firstSize),this.preview.height(i.lastSize)}this._checkHeightsManaged("fullscreen",!1),this.wrap[0].style.height=t.originalWrapStyleHeight}return this._wrapResizeListener(),this},isSidebyside:function(){return this.wrap.hasClass("sidebyside")},toggleSidebyside:function(e,t){if(e=c(e,this.isSidebyside(),t),e===n)return this;var r=this.isPreviewOpen(),i=this.bottommargin.offset().top;if(e){this.wrap.addClass("sidebyside"),this._adjustWidths(this.wrap.width()),r||this.togglePreview(!0,0,!1,!0);var s=B.appendTo(this.editorWrap).offset().top,a=B.appendTo(this.previewWrap).offset().top;B.detach(),r||this.togglePreview(!1,0,!1,!0);var o=s-a;this.preview.height("+="+o);var h=i-this.bottommargin.offset().top;this.editor.height("+="+h),this.preview.height("+="+h),this._checkHeightsManaged("sidebyside",!0)}else{r||this.togglePreview(!0,0,!1,!0);var l=this.wrap.height();this.editorWrap.css("width",""),this._checkHeightsManaged("sidebyside",!1),this.editorWrap.css({width:"",maxWidth:""}),this.previewWrap.css({width:"",maxWidth:""}),this.wrap.removeClass("sidebyside");var p=this.bottommargin.offset().top-i;this.lastWrapHeight=l+p,this._adjustHeights(l),this.lastWrapHeight=l,r||this.togglePreview(!1,0,!1,!0)}return this},isPreviewCollapses:function(){return this._previewCollapses},togglePreviewCollapses:function(e,t){return e=c(e,this._previewCollapses,t),e===n?this:(this._previewCollapses=e,this._checkHeightsManaged(),this)},_isHeightsManaged:function(){return this._heightsManaged},_toggleHeightsManaged:function(e,t){return e=c(e,this._heightsManaged,t),e===n?this:(e?this.wrap.height("+=0").addClass("heightsManaged"):this.wrap.height("auto").removeClass("heightsManaged"),this._heightsManaged=e,this)},_checkHeightsManaged:function(e,t,r){var n="previewCollapses"===e?t:this._previewCollapses,i="fullscreen"===e?t:this.isFullscreen(),s="sidebyside"===e?t:this.isSidebyside(),a=!n||i||s;(r||a!==this._heightsManaged)&&this._toggleHeightsManaged(a,r)},_wrapResizeListener:function(){var e=this.wrap.width(),t=this.wrap.height();if(e!==this.lastWrapWidth&&(this._checkToolbarOverflowedControls(),this._adjustWidths(e),this.lastWrapWidth=e),t!==this.lastWrapHeight){if(this._heightsManaged)this._adjustHeights(t);else{var r=this.editor.height();this.lastEditorPercentHeight=r/(r+this.preview.height())}this.lastWrapHeight=t}},_adjustHeights:function(e){var t;if(this.isSidebyside()){var r=e-this.lastWrapHeight;t={firstSize:this.editor.height()+r,lastSize:this.preview.height()+r}}else{var n=this.isPreviewOpen(),i=this.editor.height(),s=n?this.preview.height():0,a=i+s+(e-this.lastWrapHeight);t=d(a,this.lastEditorPercentHeight,15),n||(t.firstSize=i+(e-this.lastWrapHeight))}return this.editor.height(t.firstSize),this.preview.height(t.lastSize),this},_adjustWidths:function(e){if(this.isSidebyside()){var t=d(e,this.lastEditorPercentWidth,60);this.isPreviewOpen()||(t.firstSize+=t.lastSize),this.editorWrap.width(t.firstSize),this.previewWrap.width(t.lastSize),this.editorWrap[0].style.maxWidth=t.firstSize+"px",this.previewWrap[0].style.maxWidth=t.lastSize+"px"}return this},_checkToolbarOverflowedControls:function(){for(var t=this.controls.children(),r=e(t[0]),n=r.position().top,i=!1,s=t.length-1;s>1;s--)if(r=e(t[s]),!r.hasClass("overflowedControl")){if(r.position().top<=n)break;r.addClass("overflowedControl"),i=!0}if(!i)for(;s<t.length;s++)if(r=e(t[s]),e(t[s]).hasClass("overflowedControl")&&(r.removeClass("overflowedControl"),r.position().top>n)){r.addClass("overflowedControl");break}return this}}),e.fn.meltdown=function(t){for(var r,n,i,s="string"===e.type(t)?t:"_init",a=Array.prototype.slice.call(arguments,"_init"===s?0:1),o=0;o<this.length;o++){if(r=this[o],n=e.data(r,"Meltdown"),"_init"===s){if(n)continue;n=new C(r),e.data(r,"Meltdown",n)}if(i=n[s].apply(n,a),i!==n)return i}return this};var D=o;o=function(){var e=D.apply(this,arguments);return e.find("span").attr("unselectable","on"),e},w&&(e.meltdown.controlDefs.sidebyside.styleClass="disabled",e.meltdown.controlDefs.sidebyside.altText="Disabled: requires jQuery 1.8+",C.prototype.toggleSidebyside=function(){return i("Requires jQuery 1.8+"),this})}(jQuery,window,document);